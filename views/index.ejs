<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="/index.css">

    <title>Tax Invoice</title>

</head>

<body>
    <div class="container text-center">
        <div class="card">
            <div class="card-header-top">
                <h6>Default Company Profile</h6>
                <h3>Demo Company</h3>
                <h6>GSTIN: ssdcd</h6>
            </div>
            <div class="card-header-bottom">
                <div class="row">
                    <div class="col">
                        +91-1234567890
                    </div>
                    <div class="col">
                        demo address
                    </div>
                    <div class="col">
                        +91-9876543210
                    </div>
                </div>
            </div>
            <hr>
            <div class="card-body-1">
                <h6># TAX INVOICE #</h6>
            </div>
            <hr>
            <form id="invoiceForm" action="/api/invoice/create" method="POST" onsubmit="return false;">

                <div class="card-body-2">

                    <table class="table table-bordered align-middle">

                        <tr>
                            <th colspan="5" class="text-start">Receiver's Details</th>
                            <th colspan="5" class="text-start">Invoice Details</th>
                        </tr>

                        <tr>
                            <td colspan="5">
                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Name</span>
                                    <input type="text" name="Name" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Address</span>
                                    <input type="text" name="Address" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">MobileNo</span>
                                    <input type="text" name="MobileNo" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">State</span>
                                    <input type="text" name="State" class="form-control">
                                </div>

                                <div class="input-group">
                                    <span class="input-group-text">GSTIN</span>
                                    <input type="text" name="GSTIN" class="form-control">
                                </div>
                            </td>

                            <td colspan="5">
                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Invoice No</span>
                                    <input type="text" name="InvoiceNo" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Chalan No.</span>
                                    <input type="text" name="ChalanNo" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Invoice Date</span>
                                    <input type="text" name="InvoiceDate" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Due Date</span>
                                    <input type="text" name="DueDate" class="form-control">
                                </div>

                                <div class="mb-2 input-group">
                                    <span class="input-group-text">Payment Terms</span>
                                    <input type="text" name="PaymentTerms" class="form-control">
                                </div>

                                <div class="input-group">
                                    <span class="input-group-text">Eway Bill</span>
                                    <input type="text" name="EwayBill" class="form-control">
                                </div>
                            </td>
                        </tr>


                        <tr class="text-center">
                            <th>Sr</th>
                            <th>Desc.</th>
                            <th>Design No.</th>
                            <th>HSN</th>
                            <th>Qty</th>
                            <th>Cut</th>
                            <th>MTR</th>
                            <th>Qty Unit</th>
                            <th>Rate</th>
                            <th>
                                Amount
                                <button type="button" class="btn btn-sm btn-primary mt-1" onclick="addRow()">+</button>
                            </th>
                        </tr>

                        <tbody id="invoiceBody">
                            <tr>
                                <td>1</td>
                                <td><input type="text" class="form-control"></td>
                                <td><input type="text" class="form-control"></td>
                                <td><input type="text" class="form-control"></td>
                                <td><input type="number" class="form-control qty" value="0"
                                        oninput="calculateRow(this)"></td>
                                <td><input type="number" class="form-control cut" value="0"
                                        oninput="calculateRow(this)"></td>
                                <td><input type="number" class="form-control mtr" value="0"></td>
                                <td>
                                    <select class="form-select unit" onchange="calculateRow(this)">
                                        <option value="PCS">PCS</option>
                                        <option value="MTR">MTR</option>
                                    </select>
                                </td>
                                <td><input type="number" class="form-control rate" value="0"
                                        oninput="calculateRow(this)"></td>
                                <td><input type="number" class="form-control amount" value="0" readonly></td>
                            </tr>
                        </tbody>

                        <tr>
                            <td colspan="9" class="text-start"><strong>Total</strong></td>
                            <td><input type="number" id="totalAmount" class="form-control" value="0" readonly></td>
                        </tr>

                        <tr>
                            <td colspan="7" class="text-center">Amount (in words)</td>
                            <td colspan="2" class="text-start">Dis (00 %)</td>
                            <td colspan="1">
                                <input type="number" id="discount" oninput="calculateTotal()" class="form-control">
                            </td>
                        </tr>


                        <tr>
                            <td colspan="7"><span id="amountWords">Zero Rupees Only</span></td>
                            <td colspan="2" class="text-start"><strong>Taxable Value</strong></td>
                            <td colspan="1">
                                <input type="number" id="taxableValue" class="form-control" readonly>
                            </td>
                        </tr>

                        <tr>
                            <td colspan="7" rowspan="6" class="align-top text-start">
                                PAN: sdsdc<br>
                                Bank Name: zc<br>
                                Account No: zxc<br>
                                Branch Name: zsc<br>
                                IFSC: 64
                            </td>

                            <td colspan="2" class="text-start">CGST (00 %)</td>
                            <td colspan="1">
                                <input type="number" id="CGST" oninput="handleGST('CGST')" class="form-control">
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2" class="text-start">SGST (00 %)</td>
                            <td colspan="1">
                                <input type="number" id="SGST" oninput="handleGST('SGST')" class="form-control">
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2" class="text-start">IGST (5 %)</td>
                            <td colspan="1">
                                <input type="number" id="IGST" oninput="handleGST('IGST')" class="form-control">
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2" class="text-start">Invoice Total</td>
                            <td colspan="1">
                                <input type="number" id="invoiceTotalbefore" readonly class="form-control">
                            </td>
                        </tr>

                        <tr>
                            <td colspan="2" class="text-start">Round Off(+/-)</td>
                            <td colspan="1" class="text-start">0.50</td>
                        </tr>

                        <tr>
                            <td colspan="2" class="text-start"><strong>Invoice Total</strong></td>
                            <td colspan="1">
                                <input type="number" id="invoiceTotalafter" readonly class="form-control">
                            </td>
                        </tr>



                        <tr style="height:120px;">
                            <td colspan="7" class="text-start">
                                TERM & CONDITION<br>
                                SUBJECT TO SURAT JURISDICTION E.&O.E.<br>
                                Goods once sold will not be taken back or replaced.<br>
                                Any complaint of goods should be made within 7 days.<br>
                                Interest @ 4% per month will be charged on the bill.<br>
                                Receiver's Sign. ___________________
                            </td>
                            <td colspan="3" class="text-center">
                                For, Demo Company<br><br><br>
                                Authorised Sign<br>
                                ___________________
                            </td>
                        </tr>

                    </table>


                    <button type="submit" class="btn btn-success px-5">Submit</button>

                </div>
            </form>

        </div>
    </div>



    <script>

        function calculateRow(element) {

            const row = element.closest("tr");

            const qty = Number(row.querySelector(".qty").value) || 0;
            const cut = Number(row.querySelector(".cut").value) || 0;
            const rate = Number(row.querySelector(".rate").value) || 0;
            const unit = row.querySelector(".unit").value;

            const mtrInput = row.querySelector(".mtr");
            const amountInput = row.querySelector(".amount");

            let mtr = 0;
            let amount = 0;

            if (qty > 0 && cut > 0) {
                mtr = qty * cut;
            }

            mtrInput.value = mtr;

            if (unit === "PCS") {
                amount = qty * rate;
            } else {
                amount = mtr * rate;
            }

            amountInput.value = amount;

            calculateTotal();
        }


        function calculateTotal() {

            let total = 0;

            document.querySelectorAll(".amount").forEach(input => {
                total += Number(input.value) || 0;
            });

            document.getElementById("totalAmount").value = total;

            let discount = Number(document.getElementById("discount").value) || 0;
            let taxable = total - discount;

            document.getElementById("taxableValue").value = taxable;

            let CGST = Number(document.getElementById("CGST").value) || 0;
            let SGST = Number(document.getElementById("SGST").value) || 0;
            let IGST = Number(document.getElementById("IGST").value) || 0;

            let totalTax = CGST + SGST + IGST;

            let afterTax = taxable + totalTax;

            document.getElementById("invoiceTotalbefore").value = afterTax;

            let roundedTotal = Math.round(afterTax);
            document.getElementById("invoiceTotalafter").value = roundedTotal;

            document.getElementById("amountWords").innerText =
                numberToWords(roundedTotal) + " Rupees Only";
        }


        function handleGST(type) {

            if (type === "IGST") {

                document.getElementById("CGST").value = 0;
                document.getElementById("SGST").value = 0;

            } else {

                document.getElementById("IGST").value = 0;
            }

            calculateTotal();
        }


        function numberToWords(num) {

            let ones = ["Zero", "One", "Two", "Three", "Four", "Five", "Six", "Seven", "Eight", "Nine"];
            let teens = ["Ten", "Eleven", "Twelve", "Thirteen", "Fourteen", "Fifteen", "Sixteen", "Seventeen", "Eighteen", "Nineteen"];
            let tens = ["", "", "Twenty", "Thirty", "Forty", "Fifty", "Sixty", "Seventy", "Eighty", "Ninety"];

            let word = "";

            if (num < 10) {
                word = ones[num];
            }
            else if (num < 20) {
                word = teens[num - 10];
            }
            else if (num < 100) {
                word = tens[Math.floor(num / 10)] + " " + ones[num % 10];
            }
            else if (num < 1000) {
                word = ones[Math.floor(num / 100)] + " Hundred " + numberToWords(num % 100);
            }
            else if (num < 10000) {
                word = ones[Math.floor(num / 1000)] + " Thousand " + numberToWords(num % 1000);
            }

            return word.trim();
        }


        function addRow() {

            const tbody = document.getElementById("invoiceBody");
            const rowCount = tbody.rows.length + 1;

            const tr = document.createElement("tr");

            tr.innerHTML = `
        <td>${rowCount}</td>
        <td><input type="text" class="form-control"></td>
        <td><input type="text" class="form-control"></td>
        <td><input type="text" class="form-control"></td>

        <td>
            <input type="number" class="form-control qty"
                oninput="calculateRow(this)">
        </td>

        <td>
            <input type="number" class="form-control cut"
                oninput="calculateRow(this)">
        </td>

        <td>
            <input type="number" class="form-control mtr" readonly>
        </td>

        <td>
            <select class="form-select unit"
                onchange="calculateRow(this)">
                <option value="PCS">PCS</option>
                <option value="MTR">MTR</option>
            </select>
        </td>

        <td>
            <input type="number" class="form-control rate"
                oninput="calculateRow(this)">
        </td>

        <td>
            <input type="number" class="form-control amount" readonly>
        </td>
        `;

            tbody.appendChild(tr);
        }

    </script>





</body>

</html>